<script>
    import { goto } from '$app/navigation';
    import Logout from './logout.svelte';
    import { onMount } from 'svelte';
    import { Star } from 'phosphor-svelte';

    
    let candidateUserInfo = {};
    let candidateUserInfoFetched = false;
    let photoUrl = '';  
    let url = '';
    let navButton;
    let toggled = false;
    let candidateId = 1; // Replace with the desired candidate ID

    onMount(async () => {
        if (candidateUserInfoFetched) return;

        try {
            const response = await fetch(`/api/get_candidate_user_info?candidateId=${candidateId}`);

            if (response.ok) {
                candidateUserInfo = await response.json();
                candidateUserInfoFetched = true;
                url = candidateUserInfo.photo_url;
                photoUrl = url.replace(/^static\//, '/');;
                
            } else {
                console.error(`Failed to fetch candidate info: ${response.status} - ${response.statusText}`);
            }
        } catch (error) {
            console.error('Error fetching candidate info:', error);
        }
    });
</script>